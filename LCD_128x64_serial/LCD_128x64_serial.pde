//////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Sketch realizado por Alex TC (TCRobotics)																//
// web: http://tcrobotics.blogspot.com      																//
// twitter: @TCRobotics                     																//
// email: alex.tc.robotics-AT-gmail.com     																//
//																											//
// Publicado en BricoGeek.com																				//
// http://blog.bricogeek.com/noticias/tutoriales/tutorial-arduino-pantalla-serial-lcd-128x64/				//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <avr/pgmspace.h> //libreria para poder guardar los arrays de datos de imagenes en memoria de programa
int x;
int y;
int z;
int q;
int a;
int pixeles;
int final;
unsigned char temp;

PROGMEM  prog_uint16_t splash[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x80, 0x00, 0x00, 0x00, 0x42, 0x00,
  0x12, 0xB0, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x03, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x7E, 0x00,
  0xFF, 0xF8, 0x00, 0x07, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xE0, 0x80, 0x00, 0x02, 0x7E, 0x00,
  0x7F, 0xFC, 0x00, 0x03, 0xF0, 0x00, 0x00, 0x00, 0x07, 0x01, 0xC0, 0x80, 0x00, 0x00, 0x3E, 0x00,
  0x3F, 0x1F, 0x00, 0x11, 0xC0, 0x00, 0x00, 0x00, 0x03, 0x01, 0xE0, 0x80, 0x00, 0x65, 0x5E, 0x00,
  0x1E, 0x1F, 0x00, 0x03, 0x40, 0x00, 0x00, 0x04, 0x00, 0x05, 0xC0, 0x80, 0x00, 0x90, 0x1E, 0x00,
  0x3F, 0x1F, 0x00, 0x07, 0xB0, 0x72, 0x02, 0xB1, 0x22, 0x33, 0xE0, 0x94, 0x01, 0x69, 0x1E, 0x00,
  0x1E, 0x1F, 0x29, 0xFE, 0xC8, 0xAF, 0x87, 0xF1, 0x00, 0x25, 0xCE, 0xBF, 0xC1, 0xFE, 0x1E, 0xA9,
  0x3F, 0x1F, 0x7F, 0xFF, 0xC1, 0xFF, 0x8F, 0xBA, 0x20, 0x2A, 0x91, 0xFF, 0xC7, 0xFF, 0x5E, 0xFF,
  0x1E, 0x9F, 0x3F, 0xFB, 0xC3, 0x81, 0x9F, 0x5C, 0x30, 0x09, 0x7E, 0xFB, 0xE7, 0x8F, 0x3E, 0x9F,
  0x1F, 0x5F, 0x0C, 0x39, 0xC7, 0x83, 0xBF, 0xBE, 0x2A, 0x3F, 0xE9, 0xED, 0xE7, 0x07, 0x3E, 0x10,
  0x1F, 0xFC, 0x0C, 0x39, 0xC7, 0x81, 0x9F, 0x5E, 0x31, 0x7F, 0xF7, 0xED, 0xE7, 0x07, 0xBE, 0x00,
  0x3F, 0xFF, 0x1C, 0x11, 0x87, 0x01, 0xBF, 0xFE, 0x3C, 0x9F, 0xF9, 0xF4, 0x77, 0x07, 0xDF, 0xC0,
  0x1F, 0xBF, 0x0C, 0x01, 0xC7, 0x80, 0x3C, 0x7E, 0x3C, 0x5F, 0xFE, 0xEE, 0x7B, 0x9F, 0xBF, 0x80,
  0x3F, 0x1F, 0x9C, 0x01, 0xC7, 0x00, 0x3C, 0x6E, 0x3E, 0xBF, 0xFF, 0x7F, 0xFB, 0xFF, 0x9F, 0x00,
  0x1E, 0x2F, 0x8C, 0x01, 0xCF, 0x00, 0x3C, 0x1E, 0x3C, 0x1F, 0xF7, 0xFF, 0xFF, 0xFF, 0xBF, 0x01,
  0x3F, 0x0F, 0xDC, 0x01, 0xCF, 0x00, 0x3C, 0x0E, 0x3E, 0xBF, 0xE9, 0xCC, 0x0F, 0x00, 0x3F, 0xE0,
  0x1F, 0xA7, 0x88, 0x01, 0xCF, 0x81, 0xFC, 0x1E, 0x1E, 0x5F, 0xC7, 0xC4, 0x2E, 0x02, 0xA6, 0xE0,
  0x1F, 0xEF, 0xDC, 0x01, 0xC7, 0x83, 0xBE, 0x1E, 0x1F, 0x0F, 0xE1, 0xE7, 0xFF, 0x07, 0xBE, 0xF0,
  0x1F, 0xAF, 0x8C, 0x01, 0xC3, 0xC3, 0x9E, 0x1C, 0x1F, 0xC1, 0xC1, 0xE1, 0xEF, 0x87, 0xBE, 0xF8,
  0x3F, 0xDF, 0x9E, 0x01, 0xC7, 0xFF, 0x9F, 0xFC, 0x0F, 0xFF, 0xE0, 0xFF, 0xE7, 0xFF, 0x7E, 0x7E,
  0xFF, 0xFF, 0x7F, 0x0F, 0xF9, 0xFF, 0x0F, 0xF8, 0x03, 0xFF, 0xC0, 0x7F, 0xC3, 0xFE, 0xFF, 0xFF,
  0xFF, 0xFC, 0x7F, 0xCF, 0xFC, 0xFE, 0x03, 0xF0, 0x00, 0xFF, 0xA0, 0x3F, 0xC1, 0xFC, 0xFF, 0xFF,
  0x52, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x3E, 0x3F, 0x3F, 0x1F, 0x98, 0xCF, 0xCE, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0xC6, 0x66, 0x60, 0x60, 0x30, 0x3D, 0x9E, 0x1E, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x7E, 0x7C, 0x7F, 0x3E, 0x3D, 0x86, 0x36, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x78, 0x60, 0x03, 0x30, 0x37, 0x86, 0x7F, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0xCE, 0xFC, 0xFE, 0x7E, 0x63, 0x0C, 0xC3, 0x18, 0xC6, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

PROGMEM  prog_uint16_t out[] = {
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x18, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x60, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x01, 0x80, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x06, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x18, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0xC0, 0x00, 0x60, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x03, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x30, 0x00, 0x0C, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x08, 0x30, 0x00, 0x30, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x00, 0xCE, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0C, 0x03, 0x91, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x01, 0x84, 0x02, 0x9F, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x84, 0x01, 0x51, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0xEC, 0x07, 0x4E, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x18, 0xA1, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x0F, 0xE0, 0x00, 0x00, 0xC0, 0x20, 0xE6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x70, 0x1C, 0x00, 0x03, 0x80, 0xC1, 0xD8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x01, 0x80, 0x03, 0x00, 0x02, 0x03, 0x0E, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x02, 0x00, 0x00, 0x80, 0x00, 0x07, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x04, 0x00, 0x00, 0x40, 0x00, 0x1F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x08, 0x00, 0x00, 0x20, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x10, 0x00, 0x00, 0x10, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x20, 0x00, 0x00, 0x08, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x40, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x80, 0x00, 0x00, 0x0F, 0x80, 0xC0, 0x00, 0x3C, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x80, 0x00, 0x00, 0x0C, 0xC0, 0x00, 0x00, 0x66, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x99, 0x36, 0x4D, 0x93, 0x0C, 0xDE, 0xCE, 0x3C, 0xC0, 0x78, 0xF3, 0x30, 0x71, 0xE7, 0xFC, 0x01,
  0x9B, 0xB6, 0xED, 0xBB, 0x0F, 0x98, 0xDB, 0x66, 0xC0, 0xCD, 0x9B, 0x60, 0xDB, 0x36, 0x66, 0x01,
  0x9B, 0xB6, 0xED, 0xBB, 0x0C, 0xD8, 0xD8, 0x66, 0xCE, 0xFD, 0xFB, 0xC0, 0xC3, 0x36, 0x66, 0x01,
  0x8E, 0xE3, 0xB8, 0xEE, 0x0C, 0xD8, 0xD8, 0x66, 0xC6, 0xC1, 0x83, 0xE0, 0xC3, 0x36, 0x66, 0x01,
  0x8E, 0xE3, 0xB8, 0xEE, 0x6C, 0xD8, 0xDB, 0x66, 0x66, 0xCD, 0x9B, 0x66, 0xDB, 0x36, 0x66, 0x01,
  0x8C, 0x63, 0x18, 0xC6, 0x6F, 0x98, 0xCE, 0x3C, 0x3C, 0x78, 0xF3, 0x36, 0x71, 0xE6, 0x66, 0x01,
  0x84, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x84, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x84, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x84, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x84, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x88, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x88, 0x00, 0x80, 0x04, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x88, 0x03, 0xE0, 0x1F, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x88, 0x07, 0xF0, 0x3F, 0x80, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x88, 0x0F, 0xF8, 0x7F, 0xC0, 0x20, 0x1F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0x88, 0x0F, 0xF8, 0x7F, 0xC0, 0x20, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x84, 0x0F, 0xF8, 0x7F, 0xC0, 0x40, 0x10, 0x40, 0x00, 0x00, 0x00, 0x01, 0x00, 0x21, 0x00, 0x01,
  0x84, 0x0F, 0xF8, 0x7F, 0xC0, 0x40, 0x10, 0x40, 0x00, 0x00, 0x00, 0x01, 0x00, 0x21, 0x00, 0x01,
  0x84, 0x0F, 0xF8, 0x7F, 0xC0, 0x40, 0x13, 0xCC, 0xEC, 0x70, 0x63, 0x8F, 0x31, 0xE1, 0xE4, 0x41,
  0x84, 0x0F, 0xF8, 0x7F, 0xC0, 0x40, 0x14, 0x52, 0x92, 0x88, 0x94, 0x51, 0x4A, 0x21, 0x12, 0x81,
  0x84, 0x07, 0xF0, 0x3F, 0x80, 0x40, 0x14, 0x5E, 0x92, 0x88, 0x84, 0x51, 0x7A, 0x21, 0x12, 0x81,
  0x84, 0x03, 0xE0, 0x1F, 0x00, 0x40, 0x14, 0x50, 0x92, 0x88, 0x94, 0x51, 0x42, 0x21, 0x12, 0x81,
  0x84, 0x00, 0x00, 0x00, 0x00, 0x80, 0x13, 0xCE, 0x92, 0x70, 0x63, 0x8F, 0x39, 0xE1, 0xE1, 0x01,
  0x82, 0x00, 0x00, 0x00, 0x00, 0x80, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01,
  0x81, 0x07, 0xFF, 0xFF, 0x81, 0x00, 0x17, 0xF8, 0xF1, 0xFC, 0x00, 0x60, 0x00, 0x06, 0x06, 0x01,
  0x81, 0x05, 0x4A, 0x94, 0x81, 0x00, 0x10, 0xC1, 0x99, 0x86, 0x00, 0x60, 0x00, 0x66, 0x00, 0x01,
  0x80, 0x85, 0x4A, 0x94, 0x82, 0x00, 0x10, 0xC3, 0x09, 0x86, 0x00, 0x60, 0x00, 0x60, 0x00, 0x01,
  0x80, 0x85, 0x4A, 0x94, 0x82, 0x00, 0x10, 0xC3, 0x01, 0x86, 0x3C, 0x7C, 0x3C, 0xF6, 0x3C, 0x79,
  0x80, 0x47, 0xFF, 0xFF, 0x84, 0x00, 0x10, 0xC3, 0x01, 0x86, 0x66, 0x66, 0x66, 0x66, 0x66, 0xCD,
  0x80, 0x40, 0x00, 0x00, 0x04, 0x00, 0x10, 0xC3, 0x01, 0xFC, 0x66, 0x66, 0x66, 0x66, 0x60, 0xC1,
  0x80, 0x3F, 0xFF, 0xFF, 0xF8, 0x00, 0x10, 0xC3, 0x01, 0x86, 0x66, 0x66, 0x66, 0x66, 0x60, 0x79,
  0x80, 0x00, 0x08, 0x40, 0x00, 0x00, 0x10, 0xC3, 0x09, 0x86, 0x66, 0x66, 0x66, 0x66, 0x60, 0x0D,
  0x80, 0x00, 0x08, 0x40, 0x00, 0x00, 0x10, 0xC1, 0x99, 0x86, 0x66, 0x66, 0x66, 0x66, 0x66, 0xCD,
  0x80, 0x7F, 0xFF, 0xFF, 0xFC, 0x00, 0x10, 0xC0, 0xF1, 0x83, 0x3C, 0x7C, 0x3C, 0x36, 0x3C, 0x79,
  0x80, 0x7F, 0xFF, 0xFF, 0xFC, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
};


void setup() {
  Serial.begin(115200); //por defecto el LCD trabaja a estos bps
}

void loop() {
  delay(4000);
  cambiar_fondo();
  delay(3000);
  cambiar_fondo();
  delay(3000);

  //muestra en pantalla el array de datos de la primera imagen
  imagen(0,64,128,64,splash);
  
  delay(5000);    
  
  //hace un cambio progresivo de la retroiluminacion
  for (int i=100; i>=0; i=i-5){ luz_fondo(i); delay(100);}
  delay(400);
  for (int i=0; i<=100; i=i+5){ luz_fondo(i); delay(100);} 
  
  //borra la pantalla de arriba a abajo en negro
  borra_espacio (0,0,127,63);
  
  delay(2000);
  
  //hace un desplazamiento de la frase de abajo a arriba
  for (int i=8; i<=60; i=i+4) {
    coordenadas(17, i);
    escribir_LCD("LCD 128x64 SERIE");
  }
  
  //cambia de fondo claro a fondo oscuro (o viceversa)
  delay(2000);
  cambiar_fondo();
  delay(3000);
  
  //muestra en pantalla todo el juego de caracteres por defecto
  coordenadas(0,52);
  for (int i=32; i<=125; i++) Serial.print(i, BYTE);;
  
  delay(3000);
  
  //hace un barrido de lineas a uno y otro lado
  for (int i=0; i<=126; i=i+2) linea(i,0,i,63,1);
  for (int i=127; i>=1; i=i-2) linea(i,0,i,63,1);
  for (int i=0; i<=126; i=i+2) linea(i,0,i,63,0);
  for (int i=127; i>=1; i=i-2) linea(i,0,i,63,0);
  
  //hace un barrido angular de lineas desde dos bordes
  for (int i=1; i<=127; i=i+4) linea(0,0,i,63,1);
  for (int i=127; i>=0; i=i-4) linea(127,63,i,0,1);
  
  delay(3000);
  
  //borra toda la pantalla
  borra_espacio (127,63,0,0);
  
  delay(1000);
  cambiar_fondo();
  delay(1000);
  
  //muestra un patron de circulos
  for (int a=20; a<=120; a=a+20){
    for (int i=1; i<=30; i=i+4) circulo(a,32,i,1);
  }
  
  delay(1000);
  cambiar_fondo();
  delay(1000);
  cambiar_fondo();
  delay(1000);
  
  //muestra rectangulos aleatoriamente
  for (int a=0; a<=120; a=a+10) rectangulo(a,20,120,50,1);
  for (int i=50; i>=20; i=i-5) rectangulo(0,20,120,i,1);
  
  
  delay(2000);
  cambiar_fondo();
  delay(1000);
  
  //efecto estrellas (muestra un pixel aleatoriamente y borra aleatoriamente 3)
  for (int i=0; i<=3000; i=i+1){
    pixel(random(0,127),random(0,63),1);
    pixel(random(0,127),random(0,63),0);
    pixel(random(0,127),random(0,63),0);
    pixel(random(0,127),random(0,63),0);
  }
  
  cambiar_fondo();
  delay(2000);
  
  //muestra circulos aleatoriamente
  for (int i=0; i<=100; i=i+1) circulo(random(0,127),random(0,63),random(1,10),1);
  
  cambiar_fondo();
  cambiar_fondo();
  coordenadas(0,0);
  
  for (int i=0; i<=10; i=i+1) rectangulo(random(0,60),random(0,25),random(70,123),random(35,63),1);
  
  cambiar_fondo();
  delay(1000);
  cambiar_fondo();
  delay (1000);
  
  //escribe BRICOGEEK aleatoriamente por la pantalla
  for (int i=0; i<=20; i=i+1){
    x=random(0,40);
    y=random(8,55);
    coordenadas(x,y);  
    escribir_LCD("BRICOGEEK");
    delay(100);
    coordenadas(x,y);  
    escribir_LCD("         ");
  }
  
  delay(6000);
  
  //muestra en pantalla el array de datos de imagen de despedida
  imagen(0,63,128,64,out);
  while(1){}
}



//////////////////////FUNCIONES LCD SERIAL//////////////////////////////////////////////


//escribe caracteres en la pantalla
void escribir_LCD(char *data){
 Serial.print(data);
 delay(20);
}

//borra un caracter hacia atras
void backspace(){
 Serial.print(0x08,BYTE);
 delay(20);
}

//lanza la demo preprogramada en el backpack
void demo(){
  Serial.print(0x7C,BYTE);
  Serial.print(0x04,BYTE);
  delay(20); 
}

//invierte el fondo del LCD de claro a oscuro o viceversa
void cambiar_fondo(){
  Serial.print(0x7C,BYTE);
  Serial.print(0x12,BYTE);
  delay(20); 
}

//activa o desactiva el logo preprogramado en el backpack
void logo(){
  Serial.print(0x7C,BYTE);
  Serial.print(0x13,BYTE);
  delay(20); 
}

//setea al maximo la retroiluminacion
void luz_fondoMAX(){
  Serial.print(0x7C,BYTE);
  Serial.print(0x02,BYTE); 
  Serial.print(0x64,BYTE);
  delay(20);  
}

//setea al minimo la retroiluminacion
void luz_fondoMIN(){
  Serial.print(0x7C,BYTE);
  Serial.print(0x02,BYTE); 
  Serial.print(0x01,BYTE);
  delay(20);  
}

//apaga la retroiluminacion
void luz_fondoOFF(){
  Serial.print(0x7C,BYTE);
  Serial.print(0x02,BYTE); 
  Serial.print(0x00,BYTE); 
  delay(20); 
}

//permite ajustar la retroiluminacion
void luz_fondo(int luz){ // de 0 a 100
  Serial.print(0x7C,BYTE);
  Serial.print(0x02,BYTE); 
  Serial.print(luz,BYTE); 
  delay(20); 
}

//cambia el baudrate. Si no conseguimos comunicarnos con el display
//podemos solucionarlo mandandole cualquier dato a 115200bps durante el arranque,
//mostrara en la pantalla 115200 y se autoajustara a esa velocidad
void cambiar_baudrate(char frec){  //"1" =  4.800bps "2" =  96,00bps
  Serial.print(0x7C,BYTE);         //"3" = 19,200bps "4" =  38,400bps 
  Serial.print(0x07,BYTE);         //"5" = 57,600bps "6" = 115,200bps
  Serial.print(frec,BYTE); 
  delay(20);
}

//coloca el puntero de escritura en la posicion que le indiquemos
void coordenadas(int x, int y){    //x de 0 a 127
  Serial.print(0x7C,BYTE);         //y de 0 a  63
  Serial.print(0x18,BYTE);
  Serial.print(x,BYTE);
  Serial.print(0x7C,BYTE); 
  Serial.print(0x19,BYTE);
  Serial.print(y,BYTE);
  delay(20);
}

//activa o desactiva el pixel en una coordenada 
void pixel (int x, int y, int on_off){   //x de 0 a 127 
  Serial.print(0x7C,BYTE);               //y de 0 a  63
  Serial.print(0x10,BYTE);               //on_off=1 ON
  Serial.print(x,BYTE);                  //on_off=0 Off
  Serial.print(y,BYTE);
  Serial.print(on_off,BYTE);
}

//dibuja o borra una linea
void linea (int desde_x, int desde_y, int hasta_x, int hasta_y, int on_off){ 
  Serial.print(0x7C,BYTE);             
  Serial.print(0x0C,BYTE);               
  Serial.print(desde_x,BYTE);
  Serial.print(desde_y,BYTE);
  Serial.print(hasta_x,BYTE);
  Serial.print(hasta_y,BYTE);  
  Serial.print(on_off,BYTE);
  delay(20);
}

//dibuja o borra un circulo
void circulo (int x, int y, int radio, int on_off){ 
  Serial.print(0x7C,BYTE);             
  Serial.print(0x03,BYTE);               
  Serial.print(x,BYTE);
  Serial.print(y,BYTE);
  Serial.print(radio,BYTE);  
  Serial.print(on_off,BYTE);
  delay(20);
}

//dibuja o borra un rectangulo
void rectangulo (int desde_x, int desde_y, int hasta_x, int hasta_y, int on_off){ 
  Serial.print(0x7C,BYTE);             
  Serial.print(0x0F,BYTE);               
  Serial.print(desde_x,BYTE);
  Serial.print(desde_y,BYTE);
  Serial.print(hasta_x,BYTE);
  Serial.print(hasta_y,BYTE);  
  Serial.print(on_off,BYTE);
  delay(20);
}

//borra un area determinada de la pantalla
void borra_espacio (int desde_x, int desde_y, int hasta_x, int hasta_y){ 
  Serial.print(0x7C,BYTE);             
  Serial.print(0x05,BYTE);               
  Serial.print(desde_x,BYTE);
  Serial.print(desde_y,BYTE);
  Serial.print(hasta_x,BYTE);
  Serial.print(hasta_y,BYTE);  
  delay(20);
}


void imagen (int desde_x, int desde_y, int ancho, int alto, PROGMEM  prog_uint16_t *array){ 
  q=0;	
  final=ancho+desde_x;
  y=alto-1; 
  for (a = 0; a <= alto ; a++)
  {
    for (x = desde_x; x < final ; x=x+8)   
    {       
    temp = pgm_read_word_near(array + q);
    for (z=x; z < (x+8); z++)
      {
        if (temp & 0x80)pixel(z,y,1);
        temp= temp<<1;
      } 
    q++;             
    }     
    y--;
  }
}
